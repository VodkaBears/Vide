/*
 *  Vide - v0.5.1
 *  Easy as hell jQuery plugin for video backgrounds.
 *  http://vodkabears.github.io/vide/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery)}(this,function(a){"use strict";function b(a){var b,c,d,e,f,g,h,i={};for(f=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),h=0,g=f.length;h<g&&(c=f[h],-1===c.search(/^(http|https|ftp):\/\//)&&-1!==c.search(":"));h++)b=c.indexOf(":"),d=c.substring(0,b),e=c.substring(b+1),e||(e=void 0),"string"==typeof e&&(e="true"===e||"false"!==e&&e),"string"==typeof e&&(e=isNaN(e)?e:+e),i[d]=e;return null==d&&null==e?a:i}function c(a){a=""+a;var b,c,d,e=a.split(/\s+/),f="50%",g="50%";for(d=0,b=e.length;d<b;d++)c=e[d],"left"===c?f="0%":"right"===c?f="100%":"top"===c?g="0%":"bottom"===c?g="100%":"center"===c?0===d?f="50%":g="50%":0===d?f=c:g=c;return{x:f,y:g}}function d(b,c){var d=function(){c(this.src)};a('<img src="'+b+'.gif">').on("load",d),a('<img src="'+b+'.jpg">').on("load",d),a('<img src="'+b+'.jpeg">').on("load",d),a('<img src="'+b+'.png">').on("load",d)}function e(a,b){return-1===a.indexOf(b)&&(a+=b),a}function f(a){return a.replace(/\.\w*$/,"")}function g(c,d,e){if(this.$element=a(c),"string"==typeof d&&(d=b(d)),e?"string"==typeof e&&(e=b(e)):e={},"string"==typeof d)d=f(d);else if("object"==typeof d)for(var g in d)d.hasOwnProperty(g)&&"poster"===g&&(d[g]=f(d[g]));this.settings=a.extend({},i,e),this.path=d;try{this.init()}catch(h){if(h.message!==j)throw h}}var h="vide",i={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0,bgColor:"transparent",className:""},j="Not implemented";g.prototype.init=function(){var b,g,i=this,k=i.path,l=k,m="",n=i.$element,o=i.settings,p=c(o.position),q=o.posterType;g=i.$wrapper=a("<div>").addClass(o.className).css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-color":o.bgColor,"background-repeat":"no-repeat","background-position":p.x+" "+p.y}),"object"==typeof k&&(k.poster?l=k.poster:k.mp4?l=f(k.mp4):k.webm?l=f(k.webm):k.ogv&&(l=f(k.ogv))),"detect"===q?d(l,function(a){g.css("background-image","url("+a+")")}):"none"!==q&&g.css("background-image","url("+l+"."+q+")"),"static"===n.css("position")&&n.css("position","relative"),n.prepend(g),"object"==typeof k?(k.mp4&&(m+='<source src="'+e(k.mp4,".mp4")+'" type="video/mp4">'),k.webm&&(m+='<source src="'+e(k.webm,".webm")+'" type="video/webm">'),k.ogv&&(m+='<source src="'+e(k.ogv,".ogv")+'" type="video/ogg">'),b=i.$video=a("<video>"+m+"</video>")):b=i.$video=a('<video><source src="'+k+'.mp4" type="video/mp4"><source src="'+k+'.webm" type="video/webm"><source src="'+k+'.ogv" type="video/ogg"></video>');try{b.prop({autoplay:o.autoplay,loop:o.loop,volume:o.volume,muted:o.muted,defaultMuted:o.muted,playbackRate:o.playbackRate,defaultPlaybackRate:o.playbackRate})}catch(r){throw new Error(j)}b.css({margin:"auto",position:"absolute","z-index":-1,top:p.y,left:p.x,"-webkit-transform":"translate(-"+p.x+", -"+p.y+")","-ms-transform":"translate(-"+p.x+", -"+p.y+")","-moz-transform":"translate(-"+p.x+", -"+p.y+")",transform:"translate(-"+p.x+", -"+p.y+")",visibility:"hidden",opacity:0}).one("canplaythrough."+h,function(){i.resize()}).one("playing."+h,function(){b.css({visibility:"visible",opacity:1}),g.css("background-image","none")}),n.on("resize."+h,function(){o.resizing&&i.resize()}),g.append(b)},g.prototype.getVideoObject=function(){return this.$video[0]},g.prototype.resize=function(){if(this.$video){var a=this.$wrapper,b=this.$video,c=b[0],d=c.videoHeight,e=c.videoWidth,f=a.height(),g=a.width();g/e>f/d?b.css({width:g+2,height:"auto"}):b.css({width:"auto",height:f+2})}},g.prototype.destroy=function(){delete a[h].lookup[this.index],this.$video&&this.$video.off(h),this.$element.off(h).removeData(h),this.$wrapper.remove()},a[h]={lookup:[]},a.fn[h]=function(b,c){var d;return this.each(function(){d=a.data(this,h),d&&d.destroy(),d=new g(this,b,c),d.index=a[h].lookup.push(d)-1,a.data(this,h,d)}),this},a(document).ready(function(){var b=a(window);b.on("resize."+h,function(){for(var b,c=a[h].lookup.length,d=0;d<c;d++)(b=a[h].lookup[d])&&b.settings.resizing&&b.resize()}),b.on("unload."+h,function(){return!1}),a(document).find("[data-"+h+"-bg]").each(function(b,c){var d=a(c),e=d.data(h+"-options"),f=d.data(h+"-bg");d[h](f,e)})})});